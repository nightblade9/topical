<div id="main">
    <form onsubmit="onSearch(); return false // don't postback">
        <label for="query">Search:</label>
        <input id="query" type="text" />
        <input type="submit" value="Search">
    </form>

    <label id="output" />
</div>

<script type="text/javascript">
    // TODO: externailze in .js file
    setContent = (html) => {
        document.getElementById("output").innerHTML = html;
    }

    main = () => {
        var queryParameters = location.search.slice(1).split("&");
        for (var i = 0; i < queryParameters.length; i++)
        {
            var params = queryParameters[i].split('=');
            var key = params[0];
            var value = params[1];
            if (key.toLowerCase() == "query") {
                this.onSearch(value);
                break;
            }
        }
    }

    onSearch = (searchQuery) => {
        if (searchQuery == null)
        {
            // came from a form submission, not a parameter
            searchQuery = document.getElementById("query").value;
        }
        
        searchQuery = decodeURI(searchQuery);
        document.getElementById("query").value = searchQuery;
        
        this.setContent("HERP DERP: " + searchQuery);
    }

    main();

</script>